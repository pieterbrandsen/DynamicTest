@* @page "/" *@
@using DynamicTest.Core.Helper
@using Newtonsoft.Json.Linq
@using DynamicTest.Core.Converter
@using DynamicTest.Web.Components;
@using System.ComponentModel
@using System.Net

<InputFile OnChange="OnFileInput"/>
@if (JObject != null)
{
    <JsonTableGenerator JsonJObject="@JObject"></JsonTableGenerator>
}
@code {

    private JObject JObject { get; set; }
    private string Path { get; set; }

    private async void OnFileInput(InputFileChangeEventArgs e)
    {
        Path = await FileWriter.Json(e.File);
        var content = FileReader.Json(Path);
        var obj = JsonConverter.ConvertJsonStringToObject<JObject>(content);
        JObject = obj;
        StateHasChanged();
    }
}