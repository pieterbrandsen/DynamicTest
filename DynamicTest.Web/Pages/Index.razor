@page "/"
@using DynamicTest.Core.Helper
@using Newtonsoft.Json.Linq
@using DynamicTest.Core.Converter
@using DynamicTest.Web.Components;
@using System.ComponentModel
@using System.Dynamic
@using System.IO
@using System.Net
@using DynamicTest.Core.Models
@using Microsoft.AspNetCore.Components.Rendering
@using Syncfusion.Blazor.Inputs

<LoadFiles OnFilesInput="@OnFileInput"></LoadFiles>

@if (_data.Count > 0)
{
    <TableGenerator Data="@_data"></TableGenerator>
}



@code {

    private Dictionary<string,List<DynamicDictionary>> _data = new ();

    private async void OnFileInput(List<string> filePaths)
    {
            var obj = JObjectConverter.ConvertJsonStringToObject(filePaths);
                
            _data = DynamicDictionaryConverter.GetDynamicDictionaryList(obj);
        
        StateHasChanged();
    }
}